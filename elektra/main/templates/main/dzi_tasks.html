{% extends 'main/dzi_base.html' %}
{% load static %}

{% block left_panel %}
{% include 'main/dzi_left_panel_profile.html' %}
{% endblock %}

{% block lef_panel_icon%}
                                <div class="expand-btn-grp @@display-class">
                                    <button class="bg-solid-primary popup-dashboardright-btn">
                                        <i class="feather-sidebar right"></i>
                                    </button>
                                </div>
{% endblock %}

{% block main_content %}
            <!-- Main content -->
            <div class="rbt-main-content">
                <div class="rbt-daynamic-page-content">
                    <!-- Start Breadcarumb area  -->
                    <div class="chatenai-separator">
                        <img class="w-100 separator-dark"
                             src="{% static 'assets/images/separator/separator-top.svg' %}" alt="separator">
                        <img class="w-100 separator-light"
                             src="{% static 'assets/images/light/separator/separator-top.svg' %}" alt="separator">
                    </div>
                    <div class="breadcrumb-area breadcarumb-style1 pt--30 pb--30">
                        <div class="container">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="breadcrumb-inner text-center">
                                        <h1 class="title theme-gradient h2">Тестoви въпроси</h1>
                                        <ul class="page-list">
                                            <li class="rainbow-breadcrumb-item"><a href="{% url 'dzi_home' %}">Начало</a></li>
                                            <li class="rainbow-breadcrumb-item active">Въпроси</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Breadcarumb area  -->
                    <div class="chatenai-separator">
                        <img class="w-100 separator-dark" src="{% static 'assets/images/separator/separator-bottom.svg' %}" alt="separator">
                        <img class="w-100 separator-light" src="{% static 'assets/images/light/separator/separator-bottom.svg' %}" alt="separator">
                    </div>
{% verbatim %}
                    <!-- Dashboard Center Content -->
                    <div class="rbt-dashboard-content">
                        <div class="content-page">
                            <!-- ****************
                                 Точки от темата
                                 ****************-->
                            <div class="chat-box-list pt--30" id="chatContainer"
                                 v-for="(item, item_idx) in theme">
                                <!-- Заглавна част -->
                                <div class="chat-box author-speech bg-flashlight">
                                    <div class="inner">
                                        <div class="chat-section">
                                            <div class="chat-content">
                                                <h6 class="title">[[item.item]]. [[item.title]]</h6>
                                                <p>Критерии за оценяване: <br>[[item.criterion]] </p>
                                                <div class="rainbow-pricing-detailed-area">
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <div class="section-title text-left mb--30" data-sal="slide-up" data-sal-duration="400" data-sal-delay="150">
                                                                <p class="title w-600 mb--0">Брой тестови задачи по равнища </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row row--15">
                                                        <div class="col-lg-12">
                                                            <div class="rainbow-compare-table style-1">
                                                                <table class="table-responsive">
                                                                    <thead>
                                                                        <tr>
                                                                            <th></th>
                                                                            <th class="sm-radius-top-left color-level-1">
                                                                                Знание<br>(0 – 2 т.)</th>
                                                                            <th class="color-level-2">
                                                                                Разбиране<br>(0 – 4 т.)</th>
                                                                            <th class="color-level-3">
                                                                                Приложение<br>(0 – 6 т.)</th>
                                                                            <th class="sm-radius-top-right color-level-4">
                                                                                Анализ<br>(0 – 8 т.)
                                                                            </th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr>
                                                                            <td>по НИП</td>
                                                                            <td>[[item.knowledge]]</td>
                                                                            <td>[[item.comprehension]]</td>
                                                                            <td>[[item.application]]</td>
                                                                            <td>[[item.analysis]]</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>в БД</td>
                                                                            <td :class="{'bg-color-good': verifyQuestionQty(1, item_idx, 3),
                                                                                         'bg-color-mid': verifyQuestionQty(1, item_idx, 2),
                                                                                         'bg-color-bad': verifyQuestionQty(1, item_idx, 1),
                                                                                         }">
                                                                                [[item.q_knowledge]]</td>
                                                                            <td :class="{'bg-color-good': verifyQuestionQty(2, item_idx, 3),
                                                                                         'bg-color-mid': verifyQuestionQty(2, item_idx, 2),
                                                                                         'bg-color-bad': verifyQuestionQty(2, item_idx, 1),
                                                                                         }">
                                                                                [[item.q_comprehension]]</td>
                                                                            <td :class="{'bg-color-good': verifyQuestionQty(3, item_idx, 3),
                                                                                         'bg-color-mid': verifyQuestionQty(3, item_idx, 2),
                                                                                         'bg-color-bad': verifyQuestionQty(3, item_idx, 1),
                                                                                         }">
                                                                                [[item.q_application]]</td>
                                                                            <td :class="{'bg-color-good': verifyQuestionQty(4, item_idx, 3),
                                                                                         'bg-color-mid': verifyQuestionQty(4, item_idx, 2),
                                                                                         'bg-color-bad': verifyQuestionQty(4, item_idx, 1),
                                                                                         }">
                                                                                [[item.q_analysis]]</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td></td>
                                                                            <td><!-- data-bs-toggle="modal" data-bs-target="#editQuestionModal" -->
                                                                                <button class="react-btn btn-default btn-small btn-border"
                                                                                        @click="make_new_q(item.id, 1)">
                                                                                        Добави
                                                                                </button>
                                                                            </td>
                                                                            <td>
                                                                                <a class="btn-default btn-border" href="#">Добави</a>
                                                                            </td>
                                                                            <td>
                                                                                <a class="btn-default btn-border" href="#">Добави</a>
                                                                            </td>
                                                                            <td>
                                                                                <a class="btn-default btn-border" href="#">Добави</a>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- списък на въпросите на подтемата по нива на Блум -->
                                <div v-for="level in 4" :key="level">
                                    <!-- ако няма въпроси от това ниво -->
                                    <div class="chat-box ai-speech bg-flashlight mt--10" v-if="checkQuestionsQty(level, item_idx)==0">
                                        <div class="inner top-flashlight leftside light-xl">
                                            <div class="chat-section generate-section">
                                                <div class="chat-content">
                                                    <h6 class="title color-text-off mb--0">Няма създадени въпроси от ниво [[getLevelName(level)]]</h6>
                                               </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ако има въпроси от това ниво -->
                                    <div  v-else>
                                        <div v-for="qst in item.tasks">
                                            <div class="chat-box ai-speech bg-flashlight mt--10" v-if="qst.level==level" >
                                                <div class="inner top-flashlight leftside light-xl">
                                                    <div class="chat-section generate-section">
                                                        <div class="chat-content">
<!-- ********************************************************************************** -->
                                                            <!-- Заглавна част - параметри на въпроса -->
                                                            <h5 class="title"
                                                                :class="{'color-level-1': qst.level==1,
                                                                         'color-level-2': qst.level==2,
                                                                         'color-level-3': qst.level==3,
                                                                         'color-level-4': qst.level==4,
                                                                        }">
                                                                Въпрос #[[ qst.id ]]</h5>
                                                            <div class="row mb--20">
                                                                <div class="col-lg-4 col-md-4 col-sm-4 col-12">
                                                                    Група: [[ qst.group ]]
                                                                </div>
                                                                <div class="col-lg-4 col-md-4 col-sm-4 col-12" style="text-align: center;">
                                                                </div>
                                                                <div class="col-lg-4 col-md-4 col-sm-4 col-12 " style="text-align: right;">
                                                                   <span class="react-btn btn-default btn-small btn-border"
                                                                         :class="{'color-level-1': question.level==1,
                                                                                  'color-level-2': question.level==2,
                                                                                  'color-level-3': question.level==3,
                                                                                  'color-level-4': question.level==4,
                                                                                  }">
                                                                         Въпрос от ниво [[getLevelName(question.level)]] - [[2*question.level]] т.</span>
                                                               </div>
                                                            </div>
<!-- ********************************************************************************** -->
                                                       </div>
                                                    </div>
                                                    <div class="chat-section">
                                                        <div class="chat-content">
                                                            <p class="mb--20">[[ qst.text ]]</p>
                                                            <div class="row">
                                                                <div class="col-lg-1"></div>
                                                                <div class="col-lg-11">
                                                                    <div class="rbt-checkbox-wrapper">
                                                                        <input id="rbt-checkbox-1" name="rbt-checkbox-1" type="checkbox" disabled>
                                                                        <label for="rbt-checkbox-1">
                                                                            <span class="color-No">а. ще върнем масива в оригиналната последователност</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="rbt-checkbox-wrapper">
                                                                        <input id="rbt-checkbox-2" name="rbt-checkbox-1" type="checkbox" checked disabled>
                                                                        <label for="rbt-checkbox-2">
                                                                            <span class="color-Ok">а. ще върнем масива в оригиналната последователност</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="rbt-checkbox-wrapper">
                                                                        <input id="rbt-checkbox-3" name="rbt-checkbox-1" type="checkbox" disabled>
                                                                        <label for="rbt-checkbox-3">
                                                                            <span class="color-No">а. ще върнем масива в оригиналната последователност</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="rbt-checkbox-wrapper">
                                                                        <input id="rbt-checkbox-4" name="rbt-checkbox-1" type="checkbox" disabled>
                                                                        <label for="rbt-checkbox-4">
                                                                            <span class="color-No">а. ще върнем масива в оригиналната последователност</span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="reaction-section">
                                                                <div class="btn-grp">
                                                                    <div class="left-side-btn dropup">
                                                                        <button data-bs-toggle="modal" data-bs-target="#likeModal" class="react-btn btn-default btn-small btn-border"><i
                                                                                class="feather-thumbs-up"></i></button>
                                                                        <button data-bs-toggle="modal" data-bs-target="#dislikeModal" class="react-btn btn-default btn-small btn-border"><i
                                                                                class="feather-thumbs-down"></i></button>
                                                                        <button data-bs-toggle="modal" data-bs-target="#shareModal" class="react-btn btn-default btn-small btn-border"><i
                                                                                class="feather-share"></i></button>
                                                                        <button type="button" class="react-btn btn-default btn-small btn-border dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                                                            <i class="feather-more-vertical"></i>
                                                                        </button>
                                                                        <ul class="dropdown-menu">
                                                                            <li><a class="dropdown-item" href="#"><i
                                                                                        class="feather-copy"></i> Copy</a></li>
                                                                            <li><a class="dropdown-item" href="#"><i
                                                                                        class="feather-tag"></i> Pin Chat</a></li>
                                                                            <li><a class="dropdown-item" href="#"><i
                                                                                        class="feather-file-text"></i> Rename</a>
                                                                            </li>
                                                                            <li><a class="dropdown-item delete-item" href="#"><i
                                                                                        class="feather-trash-2"></i> Delete Chat</a>
                                                                            </li>
                                                                        </ul>
                                                                    </div>
                                                                    <div class="right-side-btn">
                                                                        <button class="react-btn btn-default btn-small btn-border bg-color-danger">
                                                                            <i class="feather-repeat"></i><span>Изтрий</span>
                                                                        </button>
                                                                        &nbsp
                                                                        <button class="react-btn btn-default btn-small btn-border bg-color-warning">
                                                                            <i class="feather-repeat"></i><span>Копирай</span>
                                                                        </button>
                                                                        &nbsp
                                                                        <button class="react-btn btn-default btn-small btn-border bg-color-success"
                                                                                data-bs-toggle="modal" data-bs-target="#editQuestionModal" >
                                                                            <i class="feather-repeat"></i><span>Промени</span>
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="rbt-static-bar collapse-width">
                            <!-- End Header Top Area  -->
                            <ul class="staticbar-btn-grp d-md-flex">
                                <li>
                                    <button class="btn-default btn-small btn-border"
                                            data-bs-toggle="modal" data-bs-target="#selectTheme">
                                        <span>Изберете друга тема</span>
                                    </button>
                                </li>
                                <li>
                                    <a class="btn-default btn-small btn-border"
                                            href="{% url 'start_test'%}">
                                        <span>Покажи всички въпроси</span>
                                    </a>
                                </li>
                                <li>
                                    <a class="btn-default btn-small btn-border"
                                            href="{% url 'start_test'%}">
                                        <span>Покажи въпросите за училището</span>
                                    </a>
                                </li>
                            </ul>
                            <div id="my_switcher" class="my_switcher">
                                <ul>
                                    {% endverbatim %}
                                    <li>
                                        <a href="javascript: void(0);" data-theme="light" class="setColor light">
                                            <img src="{% static 'assets/images/light/switch/sun-01.svg' %}" alt="Sun images"><span title="Light Mode"> Light</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="javascript: void(0);" data-theme="dark" class="setColor dark">
                                            <img src="{% static 'assets/images/light/switch/vector.svg' %}" alt="Vector Images"><span title="Dark Mode">
                                        Dark</span>
                                        </a>
                                    </li>
                                    {% verbatim %}
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Dashboard Right Content -->
                    <div class="rbt-right-side-panel popup-dashboardright-section">

                        <div class="right-side-top">
                            <h6 class="title">Съдържание на темата:</h6>
                        </div>
                        <div class="right-side-bottom mb--200">
                            <div class="chat-history-section"
                                 v-for="(theme_item, idx) in theme">
                                <h6 class="title">[[theme_item.item]]. [[theme_item.title]]</h6>
                                <ul class="chat-history-list">
                                    <li class="history-box active">
                                        <div class="dropdown history-box-dropdown">
                                            <button type="button" class="more-info-icon dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                                <i class="feather-more-horizontal"></i>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="#"><i class="feather-refresh-cw"></i> Regenerate</a></li>
                                                <li><a class="dropdown-item" href="#"><i class="feather-tag"></i> Pin Chat</a></li>
                                                <li><a class="dropdown-item" href="#"><i class="feather-file-text"></i> Rename</a></li>
                                                <li><a class="dropdown-item" href="#"><i class="feather-share-2"></i> Share</a></li>
                                                <li><a class="dropdown-item delete-item" href="#"><i class="feather-trash-2"></i> Delete Chat</a></li>
                                            </ul>
                                        </div>
                                        Знание
                                        <span style="background-color: #ffbf00; color: black;"> &nbsp;4 (мин.[[theme_item.knowledge]])&nbsp; </span>
                                    </li>
                                    <li class="history-box active">
                                        <div class="dropdown history-box-dropdown">
                                            <button type="button" class="more-info-icon dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                                <i class="feather-more-horizontal"></i>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="#"><i class="feather-refresh-cw"></i> Regenerate</a></li>
                                                <li><a class="dropdown-item" href="#"><i class="feather-tag"></i> Pin Chat</a></li>
                                                <li><a class="dropdown-item" href="#"><i class="feather-file-text"></i> Rename</a></li>
                                                <li><a class="dropdown-item" href="#"><i class="feather-share-2"></i> Share</a></li>
                                                <li><a class="dropdown-item delete-item" href="#"><i class="feather-trash-2"></i> Delete Chat</a></li>
                                            </ul>
                                        </div>
                                        Разбиране
                                        <span style="background-color: red; color: black;"> &nbsp;2 (мин.[[theme_item.comprehension]])&nbsp; </span>
                                    </li>
                                    <li class="history-box active">
                                        <div class="dropdown history-box-dropdown">
                                            <button type="button" class="more-info-icon dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                                <i class="feather-more-horizontal"></i>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="#"><i class="feather-refresh-cw"></i> Regenerate</a></li>
                                                <li><a class="dropdown-item" href="#"><i class="feather-tag"></i> Pin Chat</a></li>
                                                <li><a class="dropdown-item" href="#"><i class="feather-file-text"></i> Rename</a></li>
                                                <li><a class="dropdown-item" href="#"><i class="feather-share-2"></i> Share</a></li>
                                                <li><a class="dropdown-item delete-item" href="#"><i class="feather-trash-2"></i> Delete Chat</a></li>
                                            </ul>
                                        </div>
                                        Приложение
                                        <span style="background-color: red; color: black;"> &nbsp;2 (мин.[[theme_item.application]])&nbsp; </span>
                                    </li>
                                    <li class="history-box active">
                                        <div class="dropdown history-box-dropdown">
                                            <button type="button" class="more-info-icon dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                                <i class="feather-more-horizontal"></i>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="#"><i class="feather-refresh-cw"></i> Regenerate</a></li>
                                                <li><a class="dropdown-item" href="#"><i class="feather-tag"></i> Pin Chat</a></li>
                                                <li><a class="dropdown-item" href="#"><i class="feather-file-text"></i> Rename</a></li>
                                                <li><a class="dropdown-item" href="#"><i class="feather-share-2"></i> Share</a></li>
                                                <li><a class="dropdown-item delete-item" href="#"><i class="feather-trash-2"></i> Delete Chat</a></li>
                                            </ul>
                                        </div>
                                        Анализ
                                        <span style="background-color: green; color: black;"> &nbsp;9 (мин.[[theme_item.analysis]])&nbsp; </span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
{% endverbatim %}
                </div>
            </div>
{% endblock %}

{% block modals %}
        <!-- Редактиране на въпрос -->
        <div id="editQuestionModal" class="modal rbt-modal-box like-modal fade" tabindex="-1">
{% verbatim %}
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content wrapper top-flashlight leftside light-xl">
                    <!-- Заглавна част - параметри на въпроса -->
                    <h5 class="title"
                        :class="{'color-level-1': question.level==1,
                                 'color-level-2': question.level==2,
                                 'color-level-3': question.level==3,
                                 'color-level-4': question.level==4,
                                }">
                        Въпрос #[[ question.id ]]</h5>
                    <div class="row mb--20">
                        <div class="col-lg-4 col-md-4 col-sm-4 col-12">
                            <button type="button" class="react-btn btn-default btn-small btn-border dropdown-toggle"
                                    data-bs-toggle="dropdown" aria-expanded="false" >
                                Равнище по Блум <i class="feather-more-vertical"></i>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item color-level-1" @click="question.level=1">Знание (2т.)</a></li>
                                <li><a class="dropdown-item color-level-2" @click="question.level=2">Разбиране (4т.)</a></li>
                                <li><a class="dropdown-item color-level-3" @click="question.level=3">Приложение (6т.)</a></li>
                                <li><a class="dropdown-item color-level-4" @click="question.level=4">Анализ (8т.)</a></li>
                            </ul>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-4 col-12" style="text-align: center;">
                           <button type="button" class="react-btn btn-default btn-small btn-border dropdown-toggle"
                                   data-bs-toggle="dropdown" aria-expanded="false" >
                               Тип на въпроса <i class="feather-more-vertical"></i>
                           </button>
                           <ul class="dropdown-menu">
                               <li><a class="dropdown-item delete-item"  @click="question.type=1"><i
                                           class="feather-server"></i> Въпрос от затворен тип с един или два верни отговора</a></li>
                               <li><a class="dropdown-item delete-item"  @click="question.type=2"><i
                                           class="feather-image"></i> Въпрос от затворен тип с един или два верни отговора с картинка</a></li>
                               <li><a class="dropdown-item delete-item"  @click="question.type=3"><i
                                           class="feather-shuffle"></i> Въпрос със съпоставяне</a>
                               </li>
                               <li><a class="dropdown-item delete-item"  @click="question.type=4"><i
                                           class="feather-film"></i> Въпрос за съпоставяне на елементи от картинка със зададени опции</a>
                               </li>
                               <li><a class="dropdown-item delete-item"  @click="question.type=5"><i
                                           class="feather-edit"></i> Въпрос с отворен отговор</a>
                               </li>
                           </ul>
                       </div>
                        <div class="col-lg-4 col-md-4 col-sm-4 col-12 " style="text-align: right;">
                           <span class="react-btn btn-default btn-small btn-border"
                                 :class="{'color-level-1': question.level==1,
                                          'color-level-2': question.level==2,
                                          'color-level-3': question.level==3,
                                          'color-level-4': question.level==4,
                                          }">
                                 Ниво [[getLevelName(question.level)]] - [[2*question.level]] т.</span>
                       </div>
                    </div>
                    <div class="row">
                       <div class="col-lg-6 col-md-6 col-sm-6 col-12"></div>
                       <div class="col-lg-4 col-md-4 col-sm-4 col-8 d-flex align-items-center justify-content-end">
                           <div class="form-group">
                               <label>Група</label>
                           </div>
                       </div>
                       <div class="col-lg-2 col-md-2 col-sm-2 col-4">
                           <div class="form-group">
                               <input id="groupNum" type="text" v-model="question.group">
                           </div>
                       </div>
                   </div>
                    <!-- Картинка -->
                    <label v-if="(question.type==2)||(question.type==4)">Снимка/Схема/Диаграма:</label>
                    <div class="row" v-if="(question.type==2)||(question.type==4)">
                       <div class="col-lg-7">
                           <img v-if="question.picture" :src="question.picture" width="360">
                       </div>
                       <div class="col-lg-5">
                           <div class="form-icon icon-plus"
                                data-bs-toggle="tooltip"
                                data-bs-placement="bottom"
                                data-bs-custom-class="custom-tooltip"
                                data-bs-title="Choose File">
                                <label for="imageInput">графичен файл (.png; .jpg; .bmp)</label>
                                <input type="file"
                                       id="imageInput"
                                       class="input-file"
                                       @change="onImageChange($event)">
                           </div>
                       </div>
                   </div>
                    <!-- Формулировка на въпроса -->
                    <div class="chat-form">
                       <div class="border-gradient text-form">
                           <div class="form-group ml--10">
                               <label for="qt">Формулировка на въпроса:</label>
                               <textarea id="qt" rows="5"  v-model="question.text"></textarea>
                           </div>
                       </div>
                   </div>
                    <!-- Отговори -->
                    <div class="row mt--20">
                        <div class="col-lg-10 col-md-10 col-sm-10 col-12">
                            <label v-if="question.type==3">Редове:</label>
                            <label v-else-if="question.type==4">Опции:</label>
                            <label v-else>Отговори:</label>
                        </div>
                    </div>
                    <div class="chat-box-edit bg-flashlight mt--10" v-for="(option, idx) in question.options">
                        <div class="inner top-flashlight leftside light-xl">
                            <div class="chat-section generate-section">
                                <div class="chat-content">
                                    <div class="row">
                                       <div class="col-lg-5 col-md-5 col-sm-5 col-12 d-flex align-items-center">
                                            <span v-if="question.type==3">Ред [[idx + 1]]</span>
                                            <span v-else-if="question.type==4">Опция [[idx + 1]]</span>
                                            <span v-else="question.type==4">Отговор [[idx + 1]]</span>
                                       </div>
                                       <div class="col-lg-3 col-md-3 col-sm-3 col-6" style="text-align: right;">
                                           <div class="btn-grp">
                                               <button class="react-btn btn-default btn-small btn-border"
                                                       style="color: green; border-color: #013401;" @click="copyOption(idx)">
                                                   <i class="feather-x"></i><span>&nbspДублирай</span>
                                               </button>
                                           </div>
                                       </div>
                                       <div class="col-lg-3 col-md-3 col-sm-3 col-6" style="text-align: right;">
                                           <div class="btn-grp">
                                               <button class="react-btn btn-default btn-small btn-border"
                                                       style="color: red; border-color: #5c0000d4;" @click="deleteOption(idx)">
                                                   <i class="feather-x"></i><span>&nbspПремахни</span>
                                               </button>
                                           </div>
                                       </div>
                                       <div class="col-lg-1 col-md-1 col-sm-1 col-2">
                                           <div class="btn-grp">
                                               <button class="react-btn btn-default btn-small btn-border" @click="option.collapsed=!option.collapsed">
                                                   <i class="feather-chevrons-down" style="margin-left: -6px;" v-if="!option.collapsed"></i>
                                                   <i class="feather-chevrons-up" style="margin-left: -6px;" v-else></i>
                                               </button>
                                           </div>
                                       </div>
                                    </div>
                                </div>
                            </div>
                            <div class="chat-section">
                                <div class="chat-content">
                                    <!-- Отговор  Варианти 1 и 2 - Въпрос от затворен тип със или без картинка -->
                                    <div class="row" v-if="(question.type<3)&&(option.collapsed)">
                                        <div class="form-group col-lg-2">
                                            <label :for="'editV1C1'+idx">№/буква</label>
                                            <input type="text" class="form-control"
                                                   :id="'editV1C1'+idx" maxlength="4" size="4" v-model="option.leading_char">
                                        </div>
                                        <div class="custom-control custom-checkbox col-lg-2 align-items-end cb-ok-align"
                                             :class="{'color-Ok':option.checked, 'color-No':!option.checked,}">
                                            <input class="custom-control-input" :id="'editV1C2'+idx" type="checkbox" v-model="option.checked">
                                            <label class="custom-control-label d-flex align-items-center" :for="'editV1C2'+idx">вярно</label>
                                        </div>
                                        <div class="form-group col-lg-8">
                                            <label :for="'editV1C3'+idx">текст</label>
                                            <input type="text" class="form-control" :id="'editV1C3'+idx" v-model="option.text">
                                        </div>
                                    </div>
                                    <div class="row" v-if="(question.type<3)&&(!option.collapsed)">
                                        <div class="col-lg-1"></div>
                                        <div class="col-lg-11">
                                            <div class="rbt-checkbox-wrapper">
                                                <input :id="'editV1C4'+idx"
                                                       type="checkbox" disabled
                                                       :checked="option.checked">
                                                <label :for="'editV1C4'+idx">
                                                    <span :class="{'color-Ok': option.checked, 'color-No': !option.checked}">
                                                        [[ option.leading_char+'. '+option.text]]</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Отговор  Вариант 3 - Въпрос за съпоставяне -->
                                    <div class="row" v-else-if="(question.type==3)&&(option.collapsed)">
                                        <div class="form-group col-lg-2">
                                            <label :for="'editV3C1'+idx">№/буква</label>
                                            <input type="text" class="form-control" :id="'editV3C1'+idx" maxlength="4" size="4" v-model="option.leading_char">
                                        </div>
                                        <div class="form-group col-lg-3">
                                            <label :for="'editV3C2'+idx">текст</label>
                                            <input type="text" class="form-control" :id="'editV3C2'+idx" v-model="option.text">
                                        </div>
                                        <div class="form-group col-lg-1"></div>
                                        <div class="form-group col-lg-2">
                                            <label :for="'editV3C3'+idx">отговор</label>
                                            <input type="text" class="form-control" :id="'editV3C3'+idx" v-model="option.value">
                                        </div>
                                        <div class="form-group col-lg-4">
                                            <label :for="'editV3C4'+idx">опция</label>
                                            <input type="text" class="form-control" :id="'editV3C4'+idx" v-model="option.value_name">
                                        </div>
                                    </div>
                                    <div class="row mt--5" v-else-if="(question.type==3)&&(!option.collapsed)">
                                        <div class="col-lg-1"></div>
                                        <div class="col-lg-4" style="display: flex; align-items: center;">
                                            <span>[[ option.leading_char+'. '+option.text]]</span>
                                        </div>
                                        <div class="col-lg-1"></div>
                                        <div class="col-lg-1">
                                           <div class="btn-grp">
                                               <button class="react-btn btn-default btn-small btn-border">
                                                   <span style="margin-left: -6px;">[[option.value]]</span>
                                               </button>
                                           </div>
                                        </div>
                                        <div class="col-lg-5" style="display: flex; align-items: center;">
                                            <span >[[option.value_name]]</span>
                                        </div>
                                    </div>
                                    <!-- Отговор  Вариант 4 - Въпрос за съпоставяне от картинка -->
                                    <div class="row" v-else-if="(question.type==4)&&(option.collapsed)">
                                        <div class="form-group col-lg-1"></div>
                                        <div class="form-group col-lg-2">
                                            <label :for="'editV4C1'+idx">отговор</label>
                                            <input type="text" class="form-control" :id="'editV4C1'+idx" v-model="option.value">
                                        </div>
                                        <div class="form-group col-lg-9">
                                            <label :for="'editV4C2'+idx">опция</label>
                                            <input type="text" class="form-control" :id="'editV4C2'+idx" v-model="option.value_name">
                                        </div>
                                    </div>
                                    <div class="row mt--5" v-else-if="(question.type==4)&&(!option.collapsed)">
                                        <div class="form-group col-lg-1"></div>
                                        <div class="col-lg-1">
                                           <div class="btn-grp">
                                               <button class="react-btn btn-default btn-small btn-border">
                                                   <span style="margin-left: -6px;">[[option.value]]</span>
                                               </button>
                                           </div>
                                        </div>
                                        <div class="col-lg-10" style="display: flex; align-items: center;">
                                            <span >[[option.value_name]]</span>
                                        </div>
                                    </div>
                                    <!-- Отговор  Вариант 5 - Въпрос от отворен тип -->
                                    <div class="row" v-else-if="(question.type==5)&&(option.collapsed)">
                                        <div class="form-group col-lg-2"></div>
                                        <div class="form-group col-lg-8">
                                            <label :for="'editV5C1'+idx">текст</label>
                                            <input type="text" class="form-control" :id="'editV5C1'+idx" v-model="option.value">
                                        </div>
                                    </div>
                                    <div class="row" v-else-if="(question.type==5)&&(!option.collapsed)">
                                        <div class="form-group col-lg-2"></div>
                                        <div class="form-group col-lg-8">
                                            <span> [[option.value]] </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- добавяне на отговор -->
                    <div class="chat-box-edit bg-flashlight mt--10">
                        <div class="inner top-flashlight leftside light-xl">
                            <div class="chat-section generate-section">
                                <div class="chat-content">
                                    <div class="row">
                                       <div class="col-lg-12 col-md-12 col-sm-12 col-12" style="text-align: right;">
                                           <div class="btn-grp">
                                               <button class="react-btn btn-default btn-small btn-border"
                                                       style="color: green; border-color: #013401;" @click="addEmptyOption()">
                                                   <i class="feather-x"></i>
                                                   <span v-if="question.type==3">&nbspДобави ред</span>
                                                   <span v-else-if="question.type==4">&nbspДобави опция</span>
                                                   <span v-else>&nbspДобави отговор</span>
                                               </button>
                                           </div>
                                       </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- бутон горе ляво - затваряне на прозореца -->
                    <button class="close-button" data-bs-dismiss="modal">
                       <i class="feather-x"></i>
                   </button>
                    <!-- footer - бутони за отказ/запис -->
                    <div class="row mt--20">
                       <div class="col-lg-2 col-md-2">
                       </div>
                       <div class="col-lg-10 col-md-10 col-sm-10 col-12" style="text-align: right;">
                           <div class="btn-grp">
                               <button class="react-btn btn-default btn-small btn-border bg-color-danger"
                                       data-bs-dismiss="modal">
                                   <i class="feather-x"></i><span>&nbspОткажи</span>
                               </button>
                               &nbsp
                               <button class="react-btn btn-default btn-small btn-border bg-color-success"
                                       data-bs-dismiss="modal">
                                   <i class="feather-check"></i><span>&nbspЗапази</span>
                               </button>
                       </div>
                   </div>
               </div>
                </div>
            </div>
{% endverbatim %}
       </div>
{% endblock %}

{% block page_script %}
    <script src="{% static 'assets/js/elektra/dzi_questions_editor.js' %}"></script>
{% endblock %}
